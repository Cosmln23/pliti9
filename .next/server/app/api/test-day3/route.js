"use strict";(()=>{var e={};e.id=1033,e.ids=[1033],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},63477:e=>{e.exports=require("querystring")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},76224:e=>{e.exports=require("tty")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},63422:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>h,originalPathname:()=>v,patchFetch:()=>_,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>w});var r={};a.r(r),a.d(r,{GET:()=>m,POST:()=>u});var i=a(95419),s=a(69108),o=a(99678),n=a(78070),p=a(11144),l=a(6454);async function m(){return n.Z.json({message:"\uD83D\uDE80 ZIUA 3 - PLIPLI9 PARANORMAL API TEST",timestamp:new Date().toISOString(),features:{livepeer_integration:"✅ Ready",make_automation:"✅ Ready",demo_mode:"❌ Inactive",api_endpoints:["POST /api/test-day3/livepeer - Test Livepeer integration","POST /api/test-day3/make - Test Make.com automation","POST /api/test-day3/full - Test complete flow"]},day3_status:"\uD83C\uDFAF COMPLETED - Live API + Make.com Automation Integration"})}async function u(e){try{let{action:t}=await e.json();switch(t){case"livepeer":console.log("\uD83C\uDFA5 Testing Livepeer integration...");let a=await (0,p.zy)("Test Plipli9 Paranormal Stream");return n.Z.json({success:!0,action:"livepeer_test",message:"✅ Livepeer integration working!",data:{stream_id:a.id,stream_key:a.streamKey,rtmp_url:a.rtmpIngestUrl,playback_url:a.playbackUrl,status:a.status,demo_mode:!1},instructions:{mobile:"Use Streamlabs Mobile with RTMP URL and Stream Key",desktop:"Use OBS Studio with RTMP URL and Stream Key",viewing:"Users will see live stream at playback URL"}});case"make":console.log("\uD83D\uDCE7 Testing Make.com automation...");let r={accessCode:"PLI"+Math.random().toString(36).substr(2,6).toUpperCase(),email:"test@plipli9paranormal.com",phoneNumber:"+40712345678",amount:25,paymentMethod:"stripe",expiresAt:new Date(Date.now()+288e5).toISOString(),liveUrl:"http://localhost:3000/live",timestamp:new Date().toISOString()},i=await (0,l.$L)(r);return n.Z.json({success:!0,action:"make_automation_test",message:"✅ Make.com automation working!",data:{webhook_triggered:i,access_code:r.accessCode,email_scheduled:!0,whatsapp_scheduled:!0,demo_mode:!1},automation:{email_template:"Access code delivery with 8-hour validity",whatsapp_message:"Instant notification with access code",triggers:["Payment success","Live session start","Code expiration reminder"]}});case"full":console.log("\uD83D\uDE80 Testing complete Day 3 integration...");let s=await (0,p.zy)("Full Test Plipli9 Stream"),o={accessCode:"PLI"+Math.random().toString(36).substr(2,6).toUpperCase(),email:"fulltest@plipli9paranormal.com",phoneNumber:"+40712345678",amount:25,paymentMethod:"stripe",expiresAt:new Date(Date.now()+288e5).toISOString(),liveUrl:"http://localhost:3000/live",timestamp:new Date().toISOString()},m=await (0,l.$L)(o);return n.Z.json({success:!0,action:"full_integration_test",message:"\uD83C\uDF89 ZIUA 3 COMPLETE! All integrations working!",streaming:{platform:"Livepeer",stream_id:s.id,rtmp_url:s.rtmpIngestUrl,stream_key:s.streamKey,playback_url:s.playbackUrl,quality_profiles:["1080p","720p","480p","360p"],recording:"Auto-enabled for replay"},automation:{platform:"Make.com",payment_webhook:m,email_automation:"SendGrid integration ready",whatsapp_automation:"Twilio integration ready",access_code:o.accessCode,validity:"8 hours flexible access"},next_steps:["✅ Backend infrastructure complete","✅ Live streaming with Livepeer ready","✅ Automated notifications via Make.com ready","\uD83C\uDFAF Ready for production deployment","\uD83D\uDE80 Can start real paranormal investigations!"],production_ready:!0});default:return n.Z.json({error:"Invalid action",valid_actions:["livepeer","make","full"]},{status:400})}}catch(e){return console.error("Day 3 test error:",e),n.Z.json({error:"Test failed",message:e instanceof Error?e.message:"Unknown error",demo_mode:!1},{status:500})}}let c=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/test-day3/route",pathname:"/api/test-day3",filename:"route",bundlePath:"app/api/test-day3/route"},resolvedPagePath:"C:\\Users\\user\\Desktop\\plipli paranormal\\app\\api\\test-day3\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:y,serverHooks:g,headerHooks:h,staticGenerationBailout:w}=c,v="/api/test-day3/route";function _(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:y})}},11144:(e,t,a)=>{a.d(t,{vk:()=>o,zy:()=>s});let r=new(a(31097)).Livepeer({apiKey:process.env.LIVEPEER_API_KEY||"demo-key"}),i=[{name:"1080p",bitrate:6e6,fps:30,width:1920,height:1080},{name:"720p",bitrate:3e6,fps:30,width:1280,height:720},{name:"480p",bitrate:15e5,fps:30,width:854,height:480},{name:"360p",bitrate:8e5,fps:30,width:640,height:360}];async function s(e="Plipli9 Paranormal Live"){try{let t=await r.stream.create({name:e,profiles:i.map(e=>({name:e.name,bitrate:e.bitrate,fps:e.fps,width:e.width,height:e.height,gop:"2.0"})),record:!0,multistream:{targets:[]}});if(!t.stream)throw Error("Failed to create stream");let a=t.stream;return{id:a.id||`stream_${Date.now()}`,name:a.name||e,streamKey:a.streamKey||`key_${Date.now()}`,rtmpIngestUrl:`rtmp://rtmp.livepeer.com/live/${a.streamKey||"default"}`,playbackId:a.playbackId||`playback_${Date.now()}`,playbackUrl:`https://lvpr.tv?v=${a.playbackId||"default"}`,status:"idle",isActive:!1,createdAt:a.createdAt?new Date(a.createdAt).toISOString():new Date().toISOString()}}catch(e){throw console.error("Error creating live stream:",e),Error("Failed to create live stream")}}async function o(e){try{return await r.stream.terminate(e),!0}catch(e){return console.error("Error terminating stream:",e),!1}}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[1638,6206,7257,1097,1209,3949,6454],()=>a(63422));module.exports=r})();