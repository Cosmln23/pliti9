(()=>{var e={};e.id=6452,e.ids=[6452],e.modules={13878:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=13878,e.exports=t},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},41808:e=>{"use strict";e.exports=require("net")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},39512:e=>{"use strict";e.exports=require("timers")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},73817:(e,t,r)=>{"use strict";r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>f,patchFetch:()=>m,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>v,staticGenerationAsyncStorage:()=>_,staticGenerationBailout:()=>y});var s={};r.r(s),r.d(s,{GET:()=>l,POST:()=>c});var a=r(95419),i=r(69108),n=r(99678),o=r(78070);let u=new Map;async function c(e){try{let t=e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip")||"unknown";if(function(e){let t=Date.now(),r=t-6e4;u.has(e)||u.set(e,[]);let s=u.get(e).filter(e=>e>r);return u.set(e,s),s.length>=100||(s.push(t),!1)}(t))return o.Z.json({error:"Rate limit exceeded"},{status:429});let s=await e.json();if(!s.event_type)return o.Z.json({error:"event_type is required"},{status:400});let a={event_type:s.event_type,event_data:s.event_data||{},user_identifier:s.user_identifier||null,session_id:s.session_id||null,ip_address:t,user_agent:s.user_agent||e.headers.get("user-agent"),page_url:s.page_url||null,referrer:s.referrer||null,timestamp:s.timestamp||new Date().toISOString()},i=r(63069),n=await i.createConnection({host:process.env.DATABASE_HOST||"localhost",user:process.env.DATABASE_USER||"root",password:process.env.DATABASE_PASSWORD||"",database:process.env.DATABASE_NAME||"plipli9_paranormal",ssl:{rejectUnauthorized:!1}});try{let[e]=await n.execute(`
        INSERT INTO analytics_events (
          event_type, 
          user_identifier, 
          session_id, 
          event_data, 
          ip_address, 
          user_agent, 
          timestamp
        ) VALUES (?, ?, ?, ?, ?, ?, ?)
      `,[a.event_type,a.user_identifier,a.session_id,JSON.stringify(a.event_data),a.ip_address,a.user_agent,a.timestamp]);return await n.end(),console.log("\uD83D\uDCCA Analytics event saved:",a.event_type),o.Z.json({success:!0,event_id:e.insertId})}catch(e){return console.error("Database error in analytics tracking:",e),await n.end(),console.log("\uD83D\uDCCA Analytics Event (DB Fallback):",a),o.Z.json({success:!0,fallback:!0})}}catch(e){return console.error("Error in analytics tracking:",e),o.Z.json({error:"Internal server error"},{status:500})}}async function l(){return o.Z.json({status:"ok",service:"analytics-tracking",timestamp:new Date().toISOString()})}let p=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/analytics/track/route",pathname:"/api/analytics/track",filename:"route",bundlePath:"app/api/analytics/track/route"},resolvedPagePath:"C:\\Users\\user\\Desktop\\plipli paranormal\\app\\api\\analytics\\track\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:_,serverHooks:v,headerHooks:g,staticGenerationBailout:y}=p,f="/api/analytics/track/route";function m(){return(0,n.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:_})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,6206,3069],()=>r(73817));module.exports=s})();