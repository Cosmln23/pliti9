"use strict";exports.id=9409,exports.ids=[9409],exports.modules={89842:(e,t,s)=>{s.d(t,{Z:()=>o});var a=s(95344),r=s(3729),l=s(35851),i=s(89895),n=s(36135);let o=({isStreamerView:e=!1,streamId:t="plipli9-paranormal-live",viewerCount:s=0,isMobileOverlay:o=!1,onTypingChange:c})=>{let[u,d]=(0,r.useState)([]),[m,x]=(0,r.useState)(""),[p,h]=(0,r.useState)(""),[g,D]=(0,r.useState)(e),[f,b]=(0,r.useState)(!0),[y,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!1),k=(0,r.useRef)(null);(0,r.useRef)(null);let S=(0,r.useRef)(null),M=e=>{x(t=>t+e),j(!1)},E=()=>{k.current?.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{E()},[u]),(0,r.useEffect)(()=>{if(!e&&!p){let e=["Ghost","Spirit","Shadow","Mystery","Phantom","Seeker","Explorer","Hunter","Believer","Curious","Watcher","Guest"],t=e[Math.floor(Math.random()*e.length)];h(`${t}${Math.floor(999*Math.random())+1}`)}},[]),(0,r.useEffect)(()=>{if(!t||!g)return;let e=3e3,s=0,a=0,r=null,l=async()=>{try{let r=await fetch(`/api/chat/messages?streamId=${t}&t=${Date.now()}`);if(r.ok){let t=await r.json();t.messages&&(t.messages.length>s?(e=Math.max(2e3,e-500),a=0):++a>3&&(e=Math.min(1e4,e+1e3)),s=t.messages.length,d(e=>{let s=t.messages,a=e.filter(e=>e.id.startsWith("temp-")).filter(e=>!s.some(t=>t.username===e.username&&t.message===e.message&&1e4>Math.abs(new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())));return[...s,...a]}),b(!0),console.log(`📱 Smart chat poll: ${t.messages.length} messages (interval: ${e}ms)`))}else console.error("Failed to fetch messages:",r.status),b(!1),e=Math.min(8e3,e+1e3)}catch(t){console.error("❌ Mobile polling error:",t),b(!1),e=Math.min(8e3,e+1e3)}},i=()=>{r=setTimeout(()=>{l().then(i)},e)};return l().then(i),()=>{r&&clearTimeout(r)}},[t,g]);let F=async()=>{if(!m.trim()||!t||v)return;N(!0);let s=m.trim(),a={id:`temp-${Date.now()}`,username:p,message:s,timestamp:new Date().toISOString(),type:e?"admin":"user",likes:0};d(e=>[...e,a]),x("");try{let a=await fetch("/api/chat/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({streamId:t,username:p,message:s,isStreamer:e})});if(!a.ok)throw Error(`HTTP ${a.status}`);let r=await a.json();if(!r.success)throw Error(r.error||"Failed to send message");console.log("✅ Message sent successfully on mobile:",r),b(!0)}catch(e){console.error("❌ Mobile chat error:",e),b(!1),d(e=>e.filter(e=>e.id!==a.id)),x(s),alert("Mesajul nu a putut fi trimis. Verifică conexiunea și \xeencearcă din nou.")}finally{N(!1)}},T=e=>new Date(e).toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"});return g||e?(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gray-900",children:[(0,a.jsxs)("div",{className:"border-b border-gray-800 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(l.Z,{className:"w-5 h-5 text-purple-400"}),a.jsx("h3",{className:"text-white font-semibold",children:"Chat Live"}),a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-gray-400 text-sm",children:[a.jsx(i.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[s," spectatori"]}),e&&a.jsx("button",{onClick:()=>C(!w),className:"ml-2 px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded transition-colors",title:"Toggle Twitch Bridge",children:"\uD83C\uDFAE Twitch"})]})]}),w&&e&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-purple-900/30 border border-purple-600/30 rounded-lg",children:[a.jsx("div",{className:"flex items-center space-x-2 mb-2",children:a.jsx("span",{className:"text-purple-400 text-xs font-semibold",children:"\uD83C\uDFAE BRIDGE pentru Streamlabs/OBS"})}),a.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto text-xs",children:u.slice(-3).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-purple-300",children:[e.username,":"]}),a.jsx("span",{className:"text-white flex-1",children:e.message}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${e.username}: ${e.message}`);let t=document.activeElement;t&&(t.textContent="✅",setTimeout(()=>{t.textContent="\uD83D\uDCCB"},1e3))},className:"text-purple-400 hover:text-purple-300 text-xs px-1",title:"Copy pentru Streamlabs",children:"\uD83D\uDCCB"})]},e.id))}),a.jsx("div",{className:"mt-2 text-xs text-purple-300",children:"\uD83D\uDCA1 Mesajele se copiază automat - paste \xeen Streamlabs pentru a le vedea \xeen live"})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 space-y-3 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent",children:[u.map(e=>a.jsx("div",{className:"group",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold flex-shrink-0",children:e.username.slice(0,2).toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("span",{className:"text-purple-400 font-semibold text-sm",children:e.username}),a.jsx("span",{className:"text-gray-500 text-xs",children:T(e.timestamp)})]}),a.jsx("p",{className:"text-white text-sm break-words",children:e.message})]})]})},e.id)),0===u.length&&(0,a.jsxs)("div",{className:"text-center text-gray-400 py-8",children:[a.jsx(l.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Fii primul care scrie \xeen chat!"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Folosește emoji-urile paranormale \uD83D\uDC7B"})]}),a.jsx("div",{ref:k})]}),(0,a.jsxs)("div",{className:"border-t border-gray-800 p-3",children:[y&&(0,a.jsxs)("div",{className:"mb-3 p-2 bg-gray-800 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Emoji paranormale:"}),a.jsx("div",{className:"grid grid-cols-8 gap-1",children:["\uD83D\uDC7B","\uD83D\uDC80","\uD83D\uDD2E","\uD83D\uDD6F️","\uD83C\uDF19","⚡","\uD83E\uDD87","\uD83D\uDD77️","\uD83D\uDD31","\uD83D\uDC9C","\uD83D\uDDA4","☠️","⚰️","\uD83C\uDF1F","✨","\uD83C\uDF0C","\uD83D\uDD6F️","\uD83D\uDD25","❄️","\uD83D\uDC8E","\uD83D\uDDDD️","\uD83D\uDCFF","\uD83D\uDD10","⚗️"].map((e,t)=>a.jsx("button",{onClick:()=>M(e),className:"text-lg hover:bg-gray-700 rounded p-1 transition-colors",title:`Adaugă ${e}`,children:e},t))})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>j(!y),className:"px-3 py-2 bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-lg transition-colors flex-shrink-0",title:"Emoji paranormale",children:"\uD83D\uDC7B"}),(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx("input",{ref:S,type:"text",value:m,onChange:e=>{x(e.target.value),c?.(e.target.value.length>0)},onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),F())},placeholder:"Scrie un mesaj...",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-500 transition-colors text-base",style:{fontSize:"16px"},maxLength:200,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"}),(0,a.jsxs)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-500",children:[m.length,"/200"]})]}),a.jsx("button",{onClick:()=>{S.current&&S.current.blur(),F()},disabled:!m.trim()||v,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex-shrink-0 touch-manipulation",style:{minHeight:"44px",minWidth:"44px"},children:v?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(n.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500 text-center",children:[f?"Conectat":"Deconectat"," • Mesajele sunt live pentru toți spectatorii"]}),a.jsx("div",{className:"mt-1 text-xs text-gray-600 text-center",children:"⚠️ Anti-spam: max 4 caractere identice, 3s cooldown"})]})]}):a.jsx("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-6 h-96 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(l.Z,{className:"w-12 h-12 text-purple-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Alătură-te conversației"}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("input",{type:"text",value:p,onChange:e=>h(e.target.value),placeholder:"Numele tău (opțional)",className:"w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",maxLength:20}),a.jsx("button",{onClick:()=>D(!0),className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Intră \xeen Chat"})]})]})})}},25545:(e,t,s)=>{s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},53148:(e,t,s)=>{s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},89895:(e,t,s)=>{s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}};