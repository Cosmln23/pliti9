(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{2433:function(e,t,r){Promise.resolve().then(r.bind(r,5040))},5040:function(e,t,r){"use strict";r.r(t);var a=r(3827),s=r(4090),l=r(7907);t.default=()=>{let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(""),[i,c]=(0,s.useState)(""),[u,o]=(0,s.useState)(!1),[m,d]=(0,s.useState)(!1),p=(0,l.useRouter)();(0,s.useEffect)(()=>{let e=localStorage.getItem("plipli9-username");e&&c(e),x();let t=setInterval(x,3e3);return()=>clearInterval(t)},[]);let x=async()=>{try{let e=await fetch("/api/chat/messages?streamId=plipli9-paranormal-live&t=".concat(Date.now()));if(e.ok){let r=await e.json();r.messages&&(t(r.messages),o(!0))}}catch(e){console.error("Error fetching messages:",e),o(!1)}},h=async()=>{if(r.trim()&&i.trim()){d(!0);try{(await fetch("/api/chat/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({streamId:"plipli9-paranormal-live",username:i.trim(),message:r.trim(),isStreamer:!1})})).ok?(n(""),localStorage.setItem("plipli9-username",i.trim()),x()):alert("Eroare la trimiterea mesajului!")}catch(e){console.error("Error sending message:",e),alert("Eroare la trimiterea mesajului!")}finally{d(!1)}}},g=e=>new Date(e).toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"}),b=(e,t)=>{if("admin"===t)return"text-purple-400";let r=["text-blue-400","text-green-400","text-yellow-400","text-pink-400","text-red-400","text-indigo-400","text-cyan-400","text-emerald-400"],a=e.length%r.length;return r[a]};return(0,a.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-900 to-black border-b border-purple-500/30 p-4",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-purple-400",children:"\uD83D\uDCAC PLIPLI9 Chat LIVE"}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["Mesajele tale vor apărea \xeen stream! ",u?"\uD83D\uDFE2 Conectat":"\uD83D\uDD34 Deconectat"]}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"⚠️ Protecție anti-spam: max 4 caractere identice consecutive, 3s cooldown"})]}),(0,a.jsx)("button",{onClick:()=>p.push("/"),className:"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg transition-colors",children:"← \xcenapoi"})]})}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-4",children:[(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 h-96 overflow-y-auto mb-4 border border-purple-500/30",children:0===e.length?(0,a.jsxs)("div",{className:"text-center text-gray-500 mt-20",children:[(0,a.jsx)("p",{className:"text-lg",children:"\uD83D\uDC7B Aici vor apărea mesajele"}),(0,a.jsx)("p",{className:"text-sm",children:"Scrie primul mesaj pentru PLIPLI9!"})]}):(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-black/50 rounded-lg p-3 border border-purple-500/20",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsxs)("span",{className:"font-bold text-sm ".concat(b(e.username,e.type)),children:[e.username,"admin"===e.type&&" \uD83D\uDC51"]}),(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:g(e.timestamp)})]}),(0,a.jsx)("div",{className:"text-white",children:e.message})]},e.id))})}),(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 border border-purple-500/30",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Numele tău:"}),(0,a.jsx)("input",{type:"text",value:i,onChange:e=>c(e.target.value),placeholder:"Scrie numele tău...",className:"w-full bg-black border border-purple-500/30 rounded-lg px-3 py-2 text-white focus:border-purple-400 focus:outline-none",maxLength:20})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Mesajul tău:"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h())},placeholder:"Scrie mesajul pentru PLIPLI9...",className:"flex-1 bg-black border border-purple-500/30 rounded-lg px-3 py-2 text-white focus:border-purple-400 focus:outline-none",maxLength:200,disabled:m}),(0,a.jsx)("button",{onClick:h,disabled:m||!r.trim()||!i.trim(),className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-6 py-2 rounded-lg font-medium transition-colors",children:m?"\uD83D\uDCE4":"\uD83D\uDCAC Trimite"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Apasă Enter pentru a trimite • Max 200 caractere"})]})]})}),(0,a.jsxs)("div",{className:"mt-6 bg-purple-900/20 border border-purple-500/30 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"\uD83D\uDCFA Cum funcționează?"}),(0,a.jsxs)("ul",{className:"text-gray-300 space-y-1 text-sm",children:[(0,a.jsx)("li",{children:"• Mesajele tale vor apărea \xeen timpul stream-ului LIVE"}),(0,a.jsx)("li",{children:"• Folosește un nume recognoscibil pentru PLIPLI9"}),(0,a.jsx)("li",{children:"• Respectă regulile comunității paranormale"}),(0,a.jsx)("li",{children:"• Chat-ul se sincronizează automat cu stream-ul"})]})]})]})]})}},7907:function(e,t,r){"use strict";var a=r(5313);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[971,69,744],function(){return e(e.s=2433)}),_N_E=e.O()}]);